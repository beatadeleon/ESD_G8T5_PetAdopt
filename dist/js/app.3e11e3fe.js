(function(){"use strict";var e={5468:function(e,a,t){var l=t(5130),o=t(6768);const n=(0,o.Lk)("hr",{class:"mt-2 mb-4"},null,-1),r=(0,o.Lk)("p",{class:"text-muted text-center"},"Adopt Pet Â© 2024",-1);function s(e,a){return(0,o.uX)(),(0,o.CE)(o.FK,null,[n,r],64)}var u=t(1241);const i={},c=(0,u.A)(i,[["render",s]]);var d=c;const m={class:"py-4"};var p={__name:"App",setup(e){return(e,a)=>{const t=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.CE)("div",null,[(0,o.Lk)("div",null,[(0,o.Lk)("main",m,[(0,o.bF)(t)])]),(0,o.bF)(d)])}}};const v=p;var k=v,b=t(973),f=t(6400),h=t(8607),L=t(4161),g=t(5942);const y={apiKey:"AIzaSyAPL9GntkLJzbJ9TG4p78p0GZAt405JQnI",authDomain:"petadopt-e0fe8.firebaseapp.com",databaseURL:"https://petadopt-e0fe8-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"petadopt-e0fe8",storageBucket:"petadopt-e0fe8.appspot.com",messagingSenderId:"44424730789",appId:"1:44424730789:web:f199a002aee390e6dc154c",measurementId:"G-BLL612Z6RW"},w=(0,f.Wp)(y),E=(0,h.xI)(w),R=(0,L.C3)(w);(0,g.P5)(w);t(4114);var U=t(4232),C=t(144),_=t(782);const A={class:"container"},S=(0,o.Lk)("br",null,null,-1),K={class:"row justify-content-center"},q={class:"col-md-10"},j={class:"card"},P={class:"card-body"},I={key:0,class:"alert alert-danger"},O=(0,o.Lk)("h4",{class:"card-header text-center"},"Login",-1),W={class:"mb-3"},x=(0,o.Lk)("label",{for:"email",class:"col-md-5 py-2 col-form-label"},"Email",-1),J={class:"mb-3"},F=(0,o.Lk)("label",{for:"password",class:"col-md-5 py-2 col-form-label"},"Password",-1),X=(0,o.Lk)("br",null,null,-1),D={class:"row mb-4 text-center justify-content-md-center"},T=(0,o.Lk)("div",{class:"col-auto"},[(0,o.Lk)("button",{type:"submit",class:"btn btn-outline-primary"},"Login")],-1),V={class:"col-auto"},N=(0,o.Lk)("button",null,"Register",-1),G=(0,o.Lk)("hr",null,null,-1),Z={name:"LoginComponent",methods:{...(0,_.i0)(["signInWithGoogle"])}};var $=Object.assign(Z,{setup(e){const a=(0,C.KR)(""),t=(0,C.KR)(""),n=(0,C.KR)(null),r=(0,_.Pj)(),s=(0,b.rd)(),u=async()=>{try{await r.dispatch("loginUser",{email:a.value,password:t.value}),s.push("/")}catch(e){n.value=e.message}};return(e,r)=>{const s=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",A,[S,(0,o.Lk)("div",K,[(0,o.Lk)("div",q,[(0,o.Lk)("div",j,[(0,o.Lk)("div",P,[n.value?((0,o.uX)(),(0,o.CE)("div",I,(0,U.v_)(n.value),1)):(0,o.Q3)("",!0),O,(0,o.Lk)("form",{onSubmit:(0,l.D$)(u,["prevent"])},[(0,o.Lk)("div",W,[x,(0,o.bo)((0,o.Lk)("input",{id:"email",type:"email",class:"form-control",value:"",required:"",autofocus:"","onUpdate:modelValue":r[0]||(r[0]=e=>a.value=e)},null,512),[[l.Jo,a.value]])]),(0,o.Lk)("div",J,[F,(0,o.bo)((0,o.Lk)("input",{id:"password",type:"password",class:"form-control",required:"","onUpdate:modelValue":r[1]||(r[1]=e=>t.value=e)},null,512),[[l.Jo,t.value]])]),X,(0,o.Lk)("div",D,[T,(0,o.Lk)("div",V,[(0,o.bF)(s,{to:"/auth/register"},{default:(0,o.k6)((()=>[N])),_:1})])]),G],32)])])])])])}}});const Q=$;var z=Q;const B={class:"container"},H={class:"row justify-content-center mt-4"},M={class:"col-md-10"},Y={class:"card"},ee={class:"row g-0"},ae={class:"col justify-content-center"},te={class:"card-body"},le={key:0,class:"alert alert-danger"},oe=(0,o.Lk)("h4",{class:"card-header text-center"},"Register your account",-1),ne=(0,o.Lk)("br",null,null,-1),re={class:"form-group mb-3"},se=(0,o.Lk)("label",{for:"name",class:"col-md-4 col-form-label"},[(0,o.eW)("Name"),(0,o.Lk)("span",{style:{color:"red"}},"*"),(0,o.eW)(":")],-1),ue=(0,o.Lk)("br",null,null,-1),ie={class:"form-group mb-3"},ce=(0,o.Lk)("label",{for:"email",class:"col-md-6 col-form-label"},[(0,o.eW)("Email"),(0,o.Lk)("span",{style:{color:"red"}},"*"),(0,o.eW)(":")],-1),de=(0,o.Lk)("br",null,null,-1),me={class:"form-group row"},pe={class:"col-md-6"},ve=(0,o.Lk)("label",{for:"pnum",class:"col-md-6 col-form-label"},[(0,o.eW)("Phone Number"),(0,o.Lk)("span",{style:{color:"red"}},"*"),(0,o.eW)(":")],-1),ke={class:"col-md-6"},be=(0,o.Lk)("label",{for:"password",class:"col-md-6 col-form-label"},[(0,o.eW)("Password"),(0,o.Lk)("span",{style:{color:"red"}},"*"),(0,o.eW)(":")],-1),fe=(0,o.Lk)("br",null,null,-1),he={class:"form-group row"},Le={class:"col-md-6"},ge=(0,o.Lk)("label",{for:"address",class:"col-md-6 col-form-label"},[(0,o.eW)("Address"),(0,o.Lk)("span",{style:{color:"red"}},"*"),(0,o.eW)(":")],-1),ye={class:"col-md-6"},we=(0,o.Lk)("label",{for:"Pcode",class:"col-md-6 col-form-label"},[(0,o.eW)("Postal Code"),(0,o.Lk)("span",{style:{color:"red"}},"*"),(0,o.eW)(":")],-1),Ee=(0,o.Lk)("br",null,null,-1),Re=(0,o.Lk)("br",null,null,-1),Ue={class:"row mb-4 text-center justify-content-md-center"},Ce=(0,o.Lk)("div",{class:"col-5"},[(0,o.Lk)("button",{type:"submit",class:"btn btn-outline-primary"},"Submit")],-1),_e={class:"col-4"},Ae=(0,o.Lk)("button",{role:"link",class:"btn btn-outline-dark"},"Cancel",-1),Se={name:"RegisterComponent"};var Ke=Object.assign(Se,{setup(e){const a=(0,C.KR)(""),t=(0,C.KR)(""),n=(0,C.KR)(""),r=(0,C.KR)(null),s=(0,C.KR)(""),u=(0,C.KR)(""),i=(0,C.KR)(""),c=(0,_.Pj)(),d=(0,b.rd)(),m=async()=>{try{p(n.value)?(await c.dispatch("registerUser",{email:t.value,password:n.value,name:a.value,address:u.value,pcode:i.value,pnum:s.value,role:"user"}),d.push("/")):r.value="Password must contain at least one non-letter and non-number character."}catch(e){r.value=e.message}},p=e=>{const a=/[^a-zA-Z0-9]/;return a.test(e)};return(e,c)=>{const d=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",B,[(0,o.Lk)("div",H,[(0,o.Lk)("div",M,[(0,o.Lk)("div",Y,[(0,o.Lk)("div",ee,[(0,o.Lk)("div",ae,[(0,o.Lk)("div",te,[r.value?((0,o.uX)(),(0,o.CE)("div",le,(0,U.v_)(r.value),1)):(0,o.Q3)("",!0),oe,ne,(0,o.Lk)("form",{action:"#",onSubmit:(0,l.D$)(m,["prevent"])},[(0,o.Lk)("div",re,[se,(0,o.bo)((0,o.Lk)("input",{id:"name",type:"name",class:"form-control",name:"name",value:"",required:"",autofocus:"","onUpdate:modelValue":c[0]||(c[0]=e=>a.value=e)},null,512),[[l.Jo,a.value]])]),ue,(0,o.Lk)("div",ie,[ce,(0,o.bo)((0,o.Lk)("input",{id:"email",type:"email",class:"form-control",name:"email",value:"",required:"",autofocus:"","onUpdate:modelValue":c[1]||(c[1]=e=>t.value=e)},null,512),[[l.Jo,t.value]])]),de,(0,o.Lk)("div",me,[(0,o.Lk)("div",pe,[ve,(0,o.bo)((0,o.Lk)("input",{id:"pnum",type:"number",pattern:"\\d*",class:"form-control",maxlength:"8",name:"pnum",oninput:"this.value = this.value.slice(0, 8)",value:"",required:"","onUpdate:modelValue":c[2]||(c[2]=e=>s.value=e)},null,512),[[l.Jo,s.value]])]),(0,o.Lk)("div",ke,[be,(0,o.bo)((0,o.Lk)("input",{id:"password",type:"password",class:"form-control",name:"password",required:"","onUpdate:modelValue":c[3]||(c[3]=e=>n.value=e),onInput:p},null,544),[[l.Jo,n.value]])])]),fe,(0,o.Lk)("div",he,[(0,o.Lk)("div",Le,[ge,(0,o.bo)((0,o.Lk)("input",{id:"address",type:"address",class:"form-control",name:"address",required:"","onUpdate:modelValue":c[4]||(c[4]=e=>u.value=e)},null,512),[[l.Jo,u.value]])]),(0,o.Lk)("div",ye,[we,(0,o.bo)((0,o.Lk)("input",{id:"Pcode",type:"number",class:"form-control",pattern:"\\d*",name:"Pcode",maxlength:"6",oninput:"this.value = this.value.slice(0, 6)",required:"","onUpdate:modelValue":c[5]||(c[5]=e=>i.value=e)},null,512),[[l.Jo,i.value]])])]),Ee,Re,(0,o.Lk)("div",Ue,[Ce,(0,o.Lk)("div",_e,[(0,o.bF)(d,{to:"/auth/login"},{default:(0,o.k6)((()=>[Ae])),_:1})])])],32)])])])])])])])}}});const qe=Ke;var je=qe;const Pe=(0,o.Lk)("h1",null,"Welcome to PetAdopt",-1),Ie={key:0},Oe={key:0},We={class:"mt-3"},xe={style:{"text-transform":"uppercase"}},Je=(0,o.Lk)("button",null,"User Dashboard",-1),Fe={key:1},Xe=(0,o.Lk)("button",null,"Admin Dashboard",-1),De=(0,o.Lk)("button",null,"Go to Dashboard",-1),Te={name:"HomeComponent",data(){return{userRole:null}},mounted(){this.fetchUserRole()},computed:{isUser(){return"user"===this.userRole},isAdmin(){return"admin"===this.userRole}},methods:{fetchUserRole(){E.onAuthStateChanged((e=>{if(e&&e.uid){const a=(0,L.KR)(R,`users/${e.uid}/role`);(0,L.Jt)(a).then((e=>{this.userRole=e.val()})).catch((e=>{}))}else this.userRole=null}))}}};var Ve=Object.assign(Te,{setup(e){const a=(0,_.Pj)();(0,b.rd)();E.onAuthStateChanged((e=>{a.dispatch("fetchUser",e)}));const t=(0,o.EW)((()=>a.getters.user));return(e,a)=>{const l=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",null,[Pe,null!==e.userRole?((0,o.uX)(),(0,o.CE)("div",Ie,[e.isUser?((0,o.uX)(),(0,o.CE)("p",Oe,[(0,o.Lk)("h1",We,[(0,o.eW)(" Hi "),(0,o.Lk)("span",xe,(0,U.v_)(t.value.data.displayName),1),(0,o.eW)(", Adopt a pet today! ")]),(0,o.bF)(l,{to:"/userDashboard"},{default:(0,o.k6)((()=>[Je])),_:1})])):e.isAdmin?((0,o.uX)(),(0,o.CE)("p",Fe,[(0,o.bF)(l,{to:"/adminDashboard"},{default:(0,o.k6)((()=>[Xe])),_:1})])):(0,o.Q3)("",!0)])):((0,o.uX)(),(0,o.Wv)(l,{key:1,to:"/auth/login"},{default:(0,o.k6)((()=>[De])),_:1}))])}}});const Ne=Ve;var Ge=Ne;const Ze={name:"AdminDashboardComponent"};var $e=Object.assign(Ze,{setup(e){(0,b.rd)();return(e,a)=>((0,o.uX)(),(0,o.CE)("h1",null,"this is admin dashboard"))}});const Qe=$e;var ze=Qe;const Be={class:"application-form-link"},He={class:"pet-card-container"},Me=["src"];var Ye={__name:"userDashboard",setup(e){(0,b.rd)();const a=(0,L.C3)(),t=(0,L.KR)(a,"petListings"),l=(0,C.KR)([]);return(0,L.Zy)(t,(e=>{const a=e.val();if(a){const e=Object.values(a);l.value=e}else l.value=[]})),(e,a)=>{const t=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",Be,[(0,o.bF)(t,{to:"/applicationForm"},{default:(0,o.k6)((()=>[(0,o.eW)("Apply Now")])),_:1})]),(0,o.Lk)("div",He,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(l.value,(e=>((0,o.uX)(),(0,o.CE)("div",{class:"pet-card",key:e.name},[(0,o.Lk)("h2",null,(0,U.v_)(e.name),1),(0,o.Lk)("img",{src:e.image,alt:"Pet Image",style:{"max-width":"100%"}},null,8,Me),(0,o.Lk)("p",null,"Species: "+(0,U.v_)(e.species),1),(0,o.Lk)("p",null,"Age: "+(0,U.v_)(e.age),1),(0,o.Lk)("p",null,"Breed: "+(0,U.v_)(e.breed),1)])))),128))])],64)}}};const ea=Ye;var aa=ea;const ta=(0,o.Lk)("h1",null,"Application Form",-1),la=(0,o.Lk)("label",{for:"name"},"Name:",-1),oa=(0,o.Lk)("label",{for:"email"},"Email:",-1),na=(0,o.Lk)("label",{for:"phone"},"Phone:",-1),ra=(0,o.Lk)("label",{for:"message"},"Message:",-1),sa=(0,o.Lk)("label",{for:"pet"},"Select Pet:",-1),ua=["value"],ia=(0,o.Lk)("div",null,[(0,o.Lk)("button",{type:"submit"},"Submit Application")],-1);var ca={__name:"applicationForm",setup(e){const a=(0,L.C3)(),t=(0,C.KR)([]),n=(0,L.KR)(a,"petListings");(0,L.Zy)(n,(e=>{const a=e.val();a&&(t.value=Object.values(a))}));const r=(0,C.KR)({name:"",email:"",phone:"",message:"",pet:""}),s=async()=>{const e=E.currentUser;if(e){const t=(0,L.KR)(a,"adoptionRequests"),l=(0,L.VC)(t),o={requestId:l.key,userId:e.uid,name:r.value.name,email:r.value.email,phone:r.value.phone,message:r.value.message,pet:r.value.pet},n=await fetch("http://localhost:5000/submit_application",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});n.ok?(r.value={name:"",email:"",phone:"",message:"",pet:""},console.log("Application submitted successfully!")):console.error("Failed to submit application:",n.statusText)}else console.log("User not logged in.")};return(e,a)=>((0,o.uX)(),(0,o.CE)("div",null,[ta,(0,o.Lk)("form",{onSubmit:(0,l.D$)(s,["prevent"])},[(0,o.Lk)("div",null,[la,(0,o.bo)((0,o.Lk)("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=e=>r.value.name=e),required:""},null,512),[[l.Jo,r.value.name]])]),(0,o.Lk)("div",null,[oa,(0,o.bo)((0,o.Lk)("input",{type:"email",id:"email","onUpdate:modelValue":a[1]||(a[1]=e=>r.value.email=e),required:""},null,512),[[l.Jo,r.value.email]])]),(0,o.Lk)("div",null,[na,(0,o.bo)((0,o.Lk)("input",{type:"tel",id:"phone","onUpdate:modelValue":a[2]||(a[2]=e=>r.value.phone=e),required:""},null,512),[[l.Jo,r.value.phone]])]),(0,o.Lk)("div",null,[ra,(0,o.bo)((0,o.Lk)("textarea",{id:"message","onUpdate:modelValue":a[3]||(a[3]=e=>r.value.message=e),rows:"4"},null,512),[[l.Jo,r.value.message]])]),(0,o.Lk)("div",null,[sa,(0,o.bo)((0,o.Lk)("select",{id:"pet","onUpdate:modelValue":a[4]||(a[4]=e=>r.value.pet=e),required:""},[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(t.value,(e=>((0,o.uX)(),(0,o.CE)("option",{key:e.name,value:e.name},(0,U.v_)(e.name),9,ua)))),128))],512),[[l.u1,r.value.pet]])]),ia],32)]))}};const da=ca;var ma=da;const pa=[{path:"/auth/login",name:"login",component:z,meta:{requiresAuth:!1}},{path:"/auth/register",name:"Register",component:je,meta:{requiresAuth:!1}},{path:"/",name:"Home",component:Ge,meta:{requiresAuth:!1}},{path:"/adminDashboard",name:"AdminDashboard",component:ze,meta:{requiresAuth:!0,requiredRole:"admin"}},{path:"/userDashboard",name:"UserDashboard",component:aa,meta:{requiresAuth:!0,requiredRole:"user"}},{path:"/applicationForm",name:"ApplicationForm",component:ma}],va=(0,b.aE)({history:(0,b.LA)(),routes:pa});va.beforeEach((async(e,a,t)=>{const l=e.matched.some((e=>e.meta.requiresAuth)),o=e.meta.requiredRole,n=await new Promise((e=>{E.onAuthStateChanged(e)}));if(!l||n){if(o&&n){const e=(0,L.KR)(R,`users/${n.uid}/role`);try{const a=await(0,L.Jt)(e),l=a.val();if(l!==o)return void t("/")}catch(r){return console.error("Error fetching user role:",r),void t("/")}}t()}else t("/auth/login")}));var ka=va;const ba=(0,_.y$)({state:{user:{loggedIn:!1,data:null}},getters:{user(e){return e.user}},mutations:{SET_USER(e,a){e.user.data=a},SET_LOGGED_IN(e,a){e.user.loggedIn=a}},actions:{async registerUser(e,{email:a,password:t,name:l,address:o,pcode:n,role:r,pnum:s}){try{const u=await(0,h.eJ)(E,a,t);if(!u)throw new Error("Unable to register user");{const t=u.user;await(0,h.r7)(t,{displayName:l});const i=(0,L.C3)();await(0,L.hZ)((0,L.KR)(i,"users/"+t.uid),{displayName:l,email:a,address:o,pcode:n,role:r,phoneNumber:s}),e.commit("SET_USER",t)}}catch(u){throw console.error("Registration error:",u),u}},async loginUser(e,{email:a,password:t}){const l=await(0,h.x9)(E,a,t);if(!l)throw new Error("login failed");e.commit("SET_USER",l.user)},async logoutUser(e){await(0,h.CI)(E),e.commit("SET_USER",null),window.location.reload()},async fetchUser(e,a){e.commit("SET_LOGGED_IN",null!==a),a?e.commit("SET_USER",{userId:a.userId,displayName:a.displayName,email:a.email,role:a.role}):e.commit("SET_USER",null)}}});var fa=ba;const ha=(0,l.Ef)(k);ha.use(ka),ha.use(fa),ha.use(E),ha.mount("#app")}},a={};function t(l){var o=a[l];if(void 0!==o)return o.exports;var n=a[l]={exports:{}};return e[l].call(n.exports,n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(a,l,o,n){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],o=e[c][1],n=e[c][2];for(var s=!0,u=0;u<l.length;u++)(!1&n||r>=n)&&Object.keys(t.O).every((function(e){return t.O[e](l[u])}))?l.splice(u--,1):(s=!1,n<r&&(r=n));if(s){e.splice(c--,1);var i=o();void 0!==i&&(a=i)}}return a}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,o,n]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var l in a)t.o(a,l)&&!t.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:a[l]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,l){var o,n,r=l[0],s=l[1],u=l[2],i=0;if(r.some((function(a){return 0!==e[a]}))){for(o in s)t.o(s,o)&&(t.m[o]=s[o]);if(u)var c=u(t)}for(a&&a(l);i<r.length;i++)n=r[i],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},l=self["webpackChunkpetadopt"]=self["webpackChunkpetadopt"]||[];l.forEach(a.bind(null,0)),l.push=a.bind(null,l.push.bind(l))}();var l=t.O(void 0,[504],(function(){return t(5468)}));l=t.O(l)})();
//# sourceMappingURL=app.3e11e3fe.js.map