{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { auth, database } from './firebaseConfig';\nimport { ref, get, update } from 'firebase/database';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'HomeComponent',\n  data() {\n    return {\n      userRole: null\n    };\n  },\n  mounted() {\n    this.fetchUserRole();\n  },\n  computed: {\n    isUser() {\n      return this.userRole === 'user';\n    },\n    isAdmin() {\n      return this.userRole === 'admin';\n    }\n  },\n  methods: {\n    fetchUserRole() {\n      auth.onAuthStateChanged(user => {\n        if (user) {\n          const userRef = ref(database, `users/${user.uid}/role`);\n          get(userRef).then(snapshot => {\n            this.userRole = snapshot.val();\n            //console.log(\"User Role from Database:\", this.userRole);\n          }).catch(error => {\n            //console.error(\"Error fetching user role:\", error);\n          });\n        } else {\n          // If user is not authenticated, redirect to the login page\n          router.push('/auth/login');\n        }\n      });\n    }\n  }\n};","map":{"version":3,"names":["auth","database","ref","get","update","useRouter","name","data","userRole","mounted","fetchUserRole","computed","isUser","isAdmin","methods","onAuthStateChanged","user","userRef","uid","then","snapshot","val","catch","error","router","push"],"sources":["/Users/junyi/Documents/petadopt/src/home.vue"],"sourcesContent":["\n<template>\n  <div>\n    <h1>Welcome to PetAdopt</h1>\n    <p v-if=\"isUser\">\n      Adopt a pet today!\n      <router-link to=\"/login\">\n        <button>Login</button>\n      </router-link>\n    </p>\n    <router-link v-else to=\"/dashboard\">\n      <button>Go to Dashboard</button>\n    </router-link>\n  </div>\n</template>\n\n\n<script>\n  import { auth, database } from './firebaseConfig';\n  import { ref, get, update } from 'firebase/database';\n  import { useRouter } from 'vue-router'\n \n\n  export default {\n    name: 'HomeComponent',\n    data() {\n        return {\n          userRole: null,\n        };\n    },\n  mounted() {\n        this.fetchUserRole();\n    },\n    computed: {\n        isUser() {\n            return this.userRole === 'user';\n        },\n        isAdmin() {\n            return this.userRole === 'admin';\n        },\n\n    },\n    methods: {\n        fetchUserRole() {\n            auth.onAuthStateChanged((user) => {\n            if (user) {\n                const userRef = ref(database, `users/${user.uid}/role`);\n                get(userRef)\n                .then((snapshot) => {\n                    this.userRole = snapshot.val();\n                    //console.log(\"User Role from Database:\", this.userRole);\n                })\n                .catch((error) => {\n                    //console.error(\"Error fetching user role:\", error);\n                });\n            } else {\n                // If user is not authenticated, redirect to the login page\n                router.push('/auth/login');\n            }\n            });\n        }\n}\n\n  }\n</script>"],"mappings":";AAkBE,SAASA,IAAI,EAAEC,QAAO,QAAS,kBAAkB;AACjD,SAASC,GAAG,EAAEC,GAAG,EAAEC,MAAK,QAAS,mBAAmB;AACpD,SAASC,SAAQ,QAAS,YAAW;AAGrC,eAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACLC,QAAQ,EAAE;IACZ,CAAC;EACL,CAAC;EACHC,OAAOA,CAAA,EAAG;IACJ,IAAI,CAACC,aAAa,CAAC,CAAC;EACxB,CAAC;EACDC,QAAQ,EAAE;IACNC,MAAMA,CAAA,EAAG;MACL,OAAO,IAAI,CAACJ,QAAO,KAAM,MAAM;IACnC,CAAC;IACDK,OAAOA,CAAA,EAAG;MACN,OAAO,IAAI,CAACL,QAAO,KAAM,OAAO;IACpC;EAEJ,CAAC;EACDM,OAAO,EAAE;IACLJ,aAAaA,CAAA,EAAG;MACZV,IAAI,CAACe,kBAAkB,CAAEC,IAAI,IAAK;QAClC,IAAIA,IAAI,EAAE;UACN,MAAMC,OAAM,GAAIf,GAAG,CAACD,QAAQ,EAAG,SAAQe,IAAI,CAACE,GAAI,OAAM,CAAC;UACvDf,GAAG,CAACc,OAAO,EACVE,IAAI,CAAEC,QAAQ,IAAK;YAChB,IAAI,CAACZ,QAAO,GAAIY,QAAQ,CAACC,GAAG,CAAC,CAAC;YAC9B;UACJ,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;YACd;UAAA,CACH,CAAC;QACN,OAAO;UACH;UACAC,MAAM,CAACC,IAAI,CAAC,aAAa,CAAC;QAC9B;MACA,CAAC,CAAC;IACN;EACR;AAEE"},"metadata":{},"sourceType":"module","externalDependencies":[]}