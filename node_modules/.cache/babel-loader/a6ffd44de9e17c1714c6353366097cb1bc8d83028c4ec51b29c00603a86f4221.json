{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [$options.isUser ? (_openBlock(), _createBlock(_component_router_link, {\n    key: 0,\n    to: \"/dashboard\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Dashboard\")]),\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createBlock(_component_router_link, {\n    key: 1,\n    to: \"/auth/login\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Login\")]),\n    _: 1 /* STABLE */\n  })), _createCommentVNode(\" <div>\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css\\\">\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css\\\">\\n    <link rel=\\\"stylesheet\\\" href=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css\\\">\\n    <nav class=\\\"navbar navbar-expand-md navbar-light nav-colour\\\">\\n      <div class=\\\"container-fluid\\\">\\n        <a class=\\\"navbar-brand d-none d-md-block\\\" href=\\\"/\\\" style=\\\"padding: 0; margin: 0; width:40%;\\\">\\n         \\n        </a>\\n\\n        <a class=\\\"navbar-brand d-block d-md-none\\\" href=\\\"/\\\"/>\\n\\n        <button class=\\\"navbar-toggler\\\" type=\\\"button\\\" data-bs-toggle=\\\"collapse\\\" data-bs-target=\\\"#navbarSupportedContent\\\"\\n          aria-controls=\\\"navbarSupportedContent\\\" aria-expanded=\\\"false\\\" aria-label=\\\"Toggle navigation\\\">\\n          <span class=\\\"navbar-toggler-icon\\\"></span>\\n        </button>\\n        <div class=\\\"collapse navbar-collapse\\\" id=\\\"navbarSupportedContent\\\">\\n          <ul class=\\\"navbar-nav me-auto mb-4 mb-lg-0\\\" style=\\\"margin-top: 20px; margin-right: 30%\\\">\\n\\n            <li v-if=\\\"isFoodBank\\\" class=\\\"nav-item dropdown\\\">\\n              <a class=\\\"nav-link dropdown-toggle\\\" href=\\\"#\\\" role=\\\"button\\\" data-bs-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                Crowd Fund\\n              </a>\\n              <ul class=\\\"dropdown-menu\\\">\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/crowdfunding/creation\\\">Create Crowdfunding Events</a></li>\\n              </ul>\\n            </li>\\n            <li v-else-if=\\\"isUser\\\" class=\\\"nav-item dropdown\\\">\\n              <a class=\\\"nav-link dropdown-toggle\\\" href=\\\"#\\\" role=\\\"button\\\" data-bs-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                Crowd Fund\\n              </a>\\n              <ul class=\\\"dropdown-menu\\\">\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/crowdfunding\\\">Find Crowdfunding Events</a></li>\\n              </ul>\\n            </li>\\n            <li v-else-if=\\\"isDeliveryDriver\\\" class=\\\"nav-item\\\">\\n              \\n            </li>\\n            <li v-else class=\\\"nav-item\\\">\\n              <a class=\\\"nav-link\\\" href=\\\"/auth/login\\\">Crowd Fund</a>\\n            </li>\\n\\n            <li v-if=\\\"isFoodBank\\\" class=\\\"nav-item dropdown\\\">\\n              <a class=\\\"nav-link dropdown-toggle\\\" href=\\\"#\\\" role=\\\"button\\\" data-bs-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                Food Events\\n              </a>\\n              <ul class=\\\"dropdown-menu\\\">\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/foodeve/creation\\\">Create Food Events</a></li>\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/foodeve/approve\\\">Approve Food Donations</a></li>\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/foodbank/delivery/create\\\">Add Delivery Driver</a></li>\\n              </ul>\\n            </li>\\n            <li v-else-if=\\\"isUser\\\" class=\\\"nav-item dropdown\\\">\\n              <a class=\\\"nav-link dropdown-toggle\\\" href=\\\"#\\\" role=\\\"button\\\" data-bs-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                Food Events\\n              </a>\\n              <ul class=\\\"dropdown-menu\\\">\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/foodeve/trending\\\">Trending food events</a></li>\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/foodeve/groupDonations/approve\\\">My Group Donations</a></li>\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/search\\\">Find Us</a></li>\\n              </ul>\\n            </li>\\n            <li v-else-if=\\\"isDeliveryDriver\\\" class=\\\"nav-item\\\">\\n              \\n            </li>\\n            <li v-else class=\\\"nav-item dropdown\\\">\\n              <a class=\\\"nav-link dropdown-toggle\\\" href=\\\"#\\\" role=\\\"button\\\" data-bs-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\">\\n                Food Events\\n              </a>\\n              <ul class=\\\"dropdown-menu\\\">\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/auth/login\\\">Trending food events</a></li>\\n                <li><a class=\\\"dropdown-item\\\" href=\\\"/auth/login\\\">Find Us</a></li>\\n              </ul>\\n            </li>\\n\\n\\n              <li v-if=\\\"isDeliveryDriver || isFoodBank\\\"></li>\\n              <li v-else class=\\\"nav-item\\\">\\n                <a class=\\\"nav-link\\\" href=\\\"/aboutUs\\\">About Us</a>\\n              </li>\\n            </ul>\\n          <div class=\\\"dropdown d-flex justify-content-end\\\">\\n            <div class=\\\"navbar-nav me-auto mb-3 mb-lg-0\\\">\\n\\n              <div class=\\\"d-flex justify-content-end\\\">\\n                  <li v-if=\\\"isUser\\\" class=\\\"nav-item dropdown mr-3\\\">\\n                    <svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"20\\\" height=\\\"20\\\" fill=\\\"currentColor\\\"\\n                      class=\\\"bi bi-bell-fill g-5 dropdown-toggle\\\" data-bs-toggle=\\\"dropdown\\\" data-bs-auto-close=\\\"outside\\\"\\n                      aria-expanded=\\\"false\\\" viewBox=\\\"0 0 16 16\\\">\\n                      <path\\n                        d=\\\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z\\\" />\\n                    </svg>\\n                    <ul class=\\\"dropdown-menu dropdown-menu-end dropdown-notif \\\" v-if=\\\"isUser\\\" :class=\\\"{ show: isNotificationsOpen }\\\">\\n                      <li>\\n                        <div class=\\\"btn-group d-flex\\\" role=\\\"group\\\" style=\\\"text-align: center;\\\">\\n                          <button class=\\\"btn btn-light\\\" @click=\\\"showFoodEventsTab\\\">Food Events</button>\\n                          <button class=\\\"btn btn-light\\\" @click=\\\"showCrowdfundingEventsTab\\\">Crowdfunding Events</button>\\n                        </div>\\n                      </li>\\n\\n                      <div v-if=\\\"showFoodEvents\\\" class=\\\"row\\\">\\n                        Food Events content \\n                          <li v-for=\\\"(foodEvent, index) in foodEvents\\\" :key=\\\"index\\\" >\\n                            <div class=\\\"dropdown-item content-section\\\" v-if=\\\"new Date(foodEvent.endEventDate).getTime() >= currentTime\\\">\\n                              <a :href=\\\"'/foodeve/' + foodEvent.id\\\" class=\\\"text-truncate d-block\\\">\\n                                {{ foodEvent.eventName }}\\n                              </a>\\n                              <div class=\\\"event-description mt-1\\\">{{ foodEvent.eventDescription }}</div>\\n                              <small class=\\\"text-muted d-block mt-1\\\">\\n                                Ends: {{ new Date(foodEvent.endEventDate).toLocaleDateString() }}\\n                              </small>\\n                            </div>\\n                            <div class=\\\"dropdown-divider\\\" v-if=\\\"index !== foodEvents.length - 1\\\"></div>\\n                          </li>\\n                        </div>\\n                        <div v-if=\\\"showCrowdfundingEvents\\\" class=\\\"row\\\">\\n                         Crowdfunding Events content \\n                          <li v-for=\\\"(crowdfundingEvent, index) in crowdfunding\\\" :key=\\\"index\\\" >\\n                            <div class=\\\"dropdown-item content-section\\\" v-if=\\\"new Date(crowdfundingEvent.endEventDate).getTime() >= currentTime\\\">\\n                              <a :href=\\\"'/crowdfunding/' + crowdfundingEvent.id\\\" class=\\\"text-truncate d-block\\\">\\n                                {{ crowdfundingEvent.eventName }}\\n                              </a>\\n                              <div class=\\\"event-description mt-1 ellipsis\\\">{{ crowdfundingEvent.eventDescription }}</div>\\n                              <small class=\\\"text-muted d-block mt-1\\\">\\n                                Ends: {{ new Date(crowdfundingEvent.endEventDate).toLocaleDateString() }}\\n                              </small>\\n                            </div>\\n                            <div class=\\\"dropdown-divider\\\" v-if=\\\"index !== crowdfunding.length - 1\\\"></div>\\n                          </li>\\n                        </div>\\n                    </ul> \\n                  </li>\\n                  <li v-else></li>\\n           \\n\\n           \\n      \\n              </div>\\n            </div>\\n          </div>\\n        </div>\\n      </div>\\n    </nav>\\n  </div> \")], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */);\n}","map":{"version":3,"names":["_createElementBlock","_Fragment","$options","isUser","_createBlock","_component_router_link","key","to","default","_withCtx","_createTextVNode","_","_createCommentVNode"],"sources":["/Users/junyi/Documents/petadopt/src/components/AppHeader.vue"],"sourcesContent":["<script setup>\nimport { getCurrentScope} from 'vue'\n\nconsole.log(getCurrentScope())\n\n//console.log(foodEvents) \n</script>\n\n<template>\n  <router-link v-if=\"isUser\" to=\"/dashboard\">Dashboard</router-link>\n    <router-link v-else to=\"/auth/login\">Login</router-link>\n  <!-- <div>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css\">\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css\">\n    <link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css\">\n    <nav class=\"navbar navbar-expand-md navbar-light nav-colour\">\n      <div class=\"container-fluid\">\n        <a class=\"navbar-brand d-none d-md-block\" href=\"/\" style=\"padding: 0; margin: 0; width:40%;\">\n         \n        </a>\n\n        <a class=\"navbar-brand d-block d-md-none\" href=\"/\"/>\n\n        <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarSupportedContent\"\n          aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n          <span class=\"navbar-toggler-icon\"></span>\n        </button>\n        <div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\n          <ul class=\"navbar-nav me-auto mb-4 mb-lg-0\" style=\"margin-top: 20px; margin-right: 30%\">\n\n            <li v-if=\"isFoodBank\" class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Crowd Fund\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"dropdown-item\" href=\"/crowdfunding/creation\">Create Crowdfunding Events</a></li>\n              </ul>\n            </li>\n            <li v-else-if=\"isUser\" class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Crowd Fund\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"dropdown-item\" href=\"/crowdfunding\">Find Crowdfunding Events</a></li>\n              </ul>\n            </li>\n            <li v-else-if=\"isDeliveryDriver\" class=\"nav-item\">\n              \n            </li>\n            <li v-else class=\"nav-item\">\n              <a class=\"nav-link\" href=\"/auth/login\">Crowd Fund</a>\n            </li>\n\n            <li v-if=\"isFoodBank\" class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Food Events\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"dropdown-item\" href=\"/foodeve/creation\">Create Food Events</a></li>\n                <li><a class=\"dropdown-item\" href=\"/foodeve/approve\">Approve Food Donations</a></li>\n                <li><a class=\"dropdown-item\" href=\"/foodbank/delivery/create\">Add Delivery Driver</a></li>\n              </ul>\n            </li>\n            <li v-else-if=\"isUser\" class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Food Events\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"dropdown-item\" href=\"/foodeve/trending\">Trending food events</a></li>\n                <li><a class=\"dropdown-item\" href=\"/foodeve/groupDonations/approve\">My Group Donations</a></li>\n                <li><a class=\"dropdown-item\" href=\"/search\">Find Us</a></li>\n              </ul>\n            </li>\n            <li v-else-if=\"isDeliveryDriver\" class=\"nav-item\">\n              \n            </li>\n            <li v-else class=\"nav-item dropdown\">\n              <a class=\"nav-link dropdown-toggle\" href=\"#\" role=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n                Food Events\n              </a>\n              <ul class=\"dropdown-menu\">\n                <li><a class=\"dropdown-item\" href=\"/auth/login\">Trending food events</a></li>\n                <li><a class=\"dropdown-item\" href=\"/auth/login\">Find Us</a></li>\n              </ul>\n            </li>\n\n\n              <li v-if=\"isDeliveryDriver || isFoodBank\"></li>\n              <li v-else class=\"nav-item\">\n                <a class=\"nav-link\" href=\"/aboutUs\">About Us</a>\n              </li>\n            </ul>\n          <div class=\"dropdown d-flex justify-content-end\">\n            <div class=\"navbar-nav me-auto mb-3 mb-lg-0\">\n\n              <div class=\"d-flex justify-content-end\">\n                  <li v-if=\"isUser\" class=\"nav-item dropdown mr-3\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\"\n                      class=\"bi bi-bell-fill g-5 dropdown-toggle\" data-bs-toggle=\"dropdown\" data-bs-auto-close=\"outside\"\n                      aria-expanded=\"false\" viewBox=\"0 0 16 16\">\n                      <path\n                        d=\"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z\" />\n                    </svg>\n                    <ul class=\"dropdown-menu dropdown-menu-end dropdown-notif \" v-if=\"isUser\" :class=\"{ show: isNotificationsOpen }\">\n                      <li>\n                        <div class=\"btn-group d-flex\" role=\"group\" style=\"text-align: center;\">\n                          <button class=\"btn btn-light\" @click=\"showFoodEventsTab\">Food Events</button>\n                          <button class=\"btn btn-light\" @click=\"showCrowdfundingEventsTab\">Crowdfunding Events</button>\n                        </div>\n                      </li>\n\n                      <div v-if=\"showFoodEvents\" class=\"row\">\n                        Food Events content \n                          <li v-for=\"(foodEvent, index) in foodEvents\" :key=\"index\" >\n                            <div class=\"dropdown-item content-section\" v-if=\"new Date(foodEvent.endEventDate).getTime() >= currentTime\">\n                              <a :href=\"'/foodeve/' + foodEvent.id\" class=\"text-truncate d-block\">\n                                {{ foodEvent.eventName }}\n                              </a>\n                              <div class=\"event-description mt-1\">{{ foodEvent.eventDescription }}</div>\n                              <small class=\"text-muted d-block mt-1\">\n                                Ends: {{ new Date(foodEvent.endEventDate).toLocaleDateString() }}\n                              </small>\n                            </div>\n                            <div class=\"dropdown-divider\" v-if=\"index !== foodEvents.length - 1\"></div>\n                          </li>\n                        </div>\n                        <div v-if=\"showCrowdfundingEvents\" class=\"row\">\n                         Crowdfunding Events content \n                          <li v-for=\"(crowdfundingEvent, index) in crowdfunding\" :key=\"index\" >\n                            <div class=\"dropdown-item content-section\" v-if=\"new Date(crowdfundingEvent.endEventDate).getTime() >= currentTime\">\n                              <a :href=\"'/crowdfunding/' + crowdfundingEvent.id\" class=\"text-truncate d-block\">\n                                {{ crowdfundingEvent.eventName }}\n                              </a>\n                              <div class=\"event-description mt-1 ellipsis\">{{ crowdfundingEvent.eventDescription }}</div>\n                              <small class=\"text-muted d-block mt-1\">\n                                Ends: {{ new Date(crowdfundingEvent.endEventDate).toLocaleDateString() }}\n                              </small>\n                            </div>\n                            <div class=\"dropdown-divider\" v-if=\"index !== crowdfunding.length - 1\"></div>\n                          </li>\n                        </div>\n                    </ul> \n                  </li>\n                  <li v-else></li>\n           \n\n           \n      \n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </nav>\n  </div> -->\n\n</template>\n\n<style scoped>\n\n.ellipsis {\n  white-space: nowrap;      /* Prevents the text from wrapping */\n  overflow: hidden;         /* Hides any overflow that doesn't fit in the container */\n  text-overflow: ellipsis;  /* Renders an ellipsis (...) to represent the clipped text */\n  width: 100%;              /* You can adjust the width as necessary */\n  display: block;           /* Or inline-block, depending on your layout */\n}\n\n.logo-small {\n  width: 30%;\n  height: 30%;\n}\n\n.logo-large {\n  width: 35%;\n  height: 35%;\n}\n\n.navbar-brand {\n  margin: 0;\n  padding: 0;\n  width: 40%;\n}\n\ni {\n  width: 60px;\n  height: 60px;\n}\n\n\n\n.dropdown-menu {\n  overflow: hidden;\n  overflow-y: auto;\n  max-height: 300px;\n}\n\n.content-section {\n  max-width: 350px;\n  /* Adjust the width as per your requirements */\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>\n\n<script>\nimport { auth, database } from '../firebaseConfig';\nimport { ref, get } from 'firebase/database';\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n// import { useDatabaseList } from 'vuefire'\n\n\n// const foodEvents = useDatabaseList(ref(database, \"foodEvent\"));\n// const crowdfunding = useDatabaseList(ref(database, \"crowdfundingEvent\"));\n// console.log(foodEvents)\n\nexport default {\n  data() {\n    return {\n      isDropdownOpen: false,\n      userRole: null,\n      store: useStore(),\n      router: useRouter(),\n      isNotificationsOpen: false,\n      currentTime: new Date().getTime(),\n      // firebaseFoodEvents: foodEvents,\n      // firebaseCrowdfundEvents: crowdfunding,\n      activeFoodEventsCount: 0,\n      activeCrowdfundCount: 0,\n    };\n  },\n  mounted() {\n    this.fetchUserRole();\n    this.calculateActiveEvents();\n    this.calculateCrowdfundActiveEvents();\n  },\n  computed: {\n    isUser() {\n      return this.userRole === 'user';\n    },\n    isFoodBank() {\n      return this.userRole === 'foodBank';\n    },\n    isDeliveryDriver() {\n      return this.userRole === 'driver';\n    }\n  },\n\n    fetchUserRole() {\n      auth.onAuthStateChanged((user) => {\n        const userRef = ref(database, `users/${user.uid}/role`);\n        get(userRef)\n          .then((snapshot) => {\n            this.userRole = snapshot.val();\n            //console.log(\"User Role from Database:\", this.userRole);\n          })\n          .catch((error) => {\n            console.error(\"Error fetching user role:\", error);\n          });\n      });\n    },\n    async signOut() {\n      await this.store.dispatch('logoutUser');\n      this.router.push('/');\n    },\n  };\n</script>\n\n\n"],"mappings":";;;uBAAAA,mBAAA,CAAAC,SAAA,SASqBC,QAAA,CAAAC,MAAM,I,cAAzBC,YAAA,CAAkEC,sBAAA;IATpEC,GAAA;IAS6BC,EAAE,EAAC;;IAThCC,OAAA,EAAAC,QAAA,CAS6C,MAAS,CATtDC,gBAAA,CAS6C,WAAS,E;IATtDC,CAAA;uBAUIP,YAAA,CAAwDC,sBAAA;IAV5DC,GAAA;IAUwBC,EAAE,EAAC;;IAV3BC,OAAA,EAAAC,QAAA,CAUyC,MAAK,CAV9CC,gBAAA,CAUyC,OAAK,E;IAV9CC,CAAA;OAWEC,mBAAA,2kQA+IU,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}