{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getCurrentScope } from 'vue';\nimport { auth, database } from '../firebaseConfig';\nimport { ref, get } from 'firebase/database';\nimport { useStore } from 'vuex';\nimport { useRouter } from 'vue-router';\n// import { useDatabaseList } from 'vuefire'\n\n// const foodEvents = useDatabaseList(ref(database, \"foodEvent\"));\n// const crowdfunding = useDatabaseList(ref(database, \"crowdfundingEvent\"));\n// console.log(foodEvents)\n\nconst __default__ = {\n  data() {\n    return {\n      isDropdownOpen: false,\n      userRole: null,\n      store: useStore(),\n      router: useRouter(),\n      isNotificationsOpen: false,\n      currentTime: new Date().getTime(),\n      // firebaseFoodEvents: foodEvents,\n      // firebaseCrowdfundEvents: crowdfunding,\n      activeFoodEventsCount: 0,\n      activeCrowdfundCount: 0\n    };\n  },\n  mounted() {\n    this.fetchUserRole();\n    this.calculateActiveEvents();\n    this.calculateCrowdfundActiveEvents();\n  },\n  computed: {\n    isUser() {\n      return this.userRole === 'user';\n    },\n    isAdmin() {\n      return this.userRole === 'admin';\n    }\n  },\n  fetchUserRole() {\n    auth.onAuthStateChanged(user => {\n      const userRef = ref(database, `users/${user.uid}/role`);\n      get(userRef).then(snapshot => {\n        this.userRole = snapshot.val();\n        console.log(\"User Role from Database:\", this.userRole);\n      }).catch(error => {\n        console.error(\"Error fetching user role:\", error);\n      });\n    });\n  },\n  async signOut() {\n    await this.store.dispatch('logoutUser');\n    this.router.push('/');\n  }\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  __name: 'AppHeader',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    console.log(getCurrentScope());\n\n    //console.log(foodEvents) \n\n    const __returned__ = {\n      get auth() {\n        return auth;\n      },\n      get database() {\n        return database;\n      },\n      get ref() {\n        return ref;\n      },\n      get get() {\n        return get;\n      },\n      get useStore() {\n        return useStore;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      getCurrentScope\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["getCurrentScope","auth","database","ref","get","useStore","useRouter","__default__","data","isDropdownOpen","userRole","store","router","isNotificationsOpen","currentTime","Date","getTime","activeFoodEventsCount","activeCrowdfundCount","mounted","fetchUserRole","calculateActiveEvents","calculateCrowdfundActiveEvents","computed","isUser","isAdmin","onAuthStateChanged","user","userRef","uid","then","snapshot","val","console","log","catch","error","signOut","dispatch","push"],"sources":["/Users/junyi/Documents/petadopt/src/components/AppHeader.vue"],"sourcesContent":["<script setup>\nimport { getCurrentScope} from 'vue'\n\nconsole.log(getCurrentScope())\n\n//console.log(foodEvents) \n</script>\n\n<template>\n    <router-link v-if=\"isUser\" to=\"/dashboard\">Dashboard</router-link>\n    <router-link v-else to=\"/auth/login\">Login</router-link>\n\n\n</template>\n\n<style scoped>\n\n.ellipsis {\n  white-space: nowrap;      /* Prevents the text from wrapping */\n  overflow: hidden;         /* Hides any overflow that doesn't fit in the container */\n  text-overflow: ellipsis;  /* Renders an ellipsis (...) to represent the clipped text */\n  width: 100%;              /* You can adjust the width as necessary */\n  display: block;           /* Or inline-block, depending on your layout */\n}\n\n.logo-small {\n  width: 30%;\n  height: 30%;\n}\n\n.logo-large {\n  width: 35%;\n  height: 35%;\n}\n\n.navbar-brand {\n  margin: 0;\n  padding: 0;\n  width: 40%;\n}\n\ni {\n  width: 60px;\n  height: 60px;\n}\n\n\n\n.dropdown-menu {\n  overflow: hidden;\n  overflow-y: auto;\n  max-height: 300px;\n}\n\n.content-section {\n  max-width: 350px;\n  /* Adjust the width as per your requirements */\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n</style>\n\n<script>\nimport { auth, database } from '../firebaseConfig';\nimport { ref, get } from 'firebase/database';\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\n// import { useDatabaseList } from 'vuefire'\n\n\n// const foodEvents = useDatabaseList(ref(database, \"foodEvent\"));\n// const crowdfunding = useDatabaseList(ref(database, \"crowdfundingEvent\"));\n// console.log(foodEvents)\n\nexport default {\n  data() {\n    return {\n      isDropdownOpen: false,\n      userRole: null,\n      store: useStore(),\n      router: useRouter(),\n      isNotificationsOpen: false,\n      currentTime: new Date().getTime(),\n      // firebaseFoodEvents: foodEvents,\n      // firebaseCrowdfundEvents: crowdfunding,\n      activeFoodEventsCount: 0,\n      activeCrowdfundCount: 0,\n    };\n  },\n  mounted() {\n    this.fetchUserRole();\n    this.calculateActiveEvents();\n    this.calculateCrowdfundActiveEvents();\n  },\n  computed: {\n    isUser() {\n      return this.userRole === 'user';\n    },\n    isAdmin() {\n      return this.userRole === 'admin';\n    },\n   \n  },\n\n    fetchUserRole() {\n      auth.onAuthStateChanged((user) => {\n        const userRef = ref(database, `users/${user.uid}/role`);\n        get(userRef)\n          .then((snapshot) => {\n            this.userRole = snapshot.val();\n            console.log(\"User Role from Database:\", this.userRole);\n          })\n          .catch((error) => {\n            console.error(\"Error fetching user role:\", error);\n          });\n      });\n    },\n    async signOut() {\n      await this.store.dispatch('logoutUser');\n      this.router.push('/');\n    },\n  };\n</script>\n\n\n"],"mappings":";AACA,SAASA,eAAe,QAAO,KAAK;AA+DpC,SAASC,IAAI,EAAEC,QAAQ,QAAQ,mBAAmB;AAClD,SAASC,GAAG,EAAEC,GAAG,QAAQ,mBAAmB;AAC5C,SAASC,QAAQ,QAAQ,MAAM;AAC/B,SAASC,SAAS,QAAQ,YAAY;AACtC;;AAGA;AACA;AACA;;AAEA,MAAAC,WAAA,GAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,cAAc,EAAE,KAAK;MACrBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAEN,QAAQ,CAAC,CAAC;MACjBO,MAAM,EAAEN,SAAS,CAAC,CAAC;MACnBO,mBAAmB,EAAE,KAAK;MAC1BC,WAAW,EAAE,IAAIC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;MACjC;MACA;MACAC,qBAAqB,EAAE,CAAC;MACxBC,oBAAoB,EAAE;IACxB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC,CAAC;IACpB,IAAI,CAACC,qBAAqB,CAAC,CAAC;IAC5B,IAAI,CAACC,8BAA8B,CAAC,CAAC;EACvC,CAAC;EACDC,QAAQ,EAAE;IACRC,MAAMA,CAAA,EAAG;MACP,OAAO,IAAI,CAACd,QAAQ,KAAK,MAAM;IACjC,CAAC;IACDe,OAAOA,CAAA,EAAG;MACR,OAAO,IAAI,CAACf,QAAQ,KAAK,OAAO;IAClC;EAEF,CAAC;EAECU,aAAaA,CAAA,EAAG;IACdnB,IAAI,CAACyB,kBAAkB,CAAEC,IAAI,IAAK;MAChC,MAAMC,OAAO,GAAGzB,GAAG,CAACD,QAAQ,EAAG,SAAQyB,IAAI,CAACE,GAAI,OAAM,CAAC;MACvDzB,GAAG,CAACwB,OAAO,CAAC,CACTE,IAAI,CAAEC,QAAQ,IAAK;QAClB,IAAI,CAACrB,QAAQ,GAAGqB,QAAQ,CAACC,GAAG,CAAC,CAAC;QAC9BC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAE,IAAI,CAACxB,QAAQ,CAAC;MACxD,CAAC,CAAC,CACDyB,KAAK,CAAEC,KAAK,IAAK;QAChBH,OAAO,CAACG,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD,CAAC,CAAC;IACN,CAAC,CAAC;EACJ,CAAC;EACD,MAAMC,OAAOA,CAAA,EAAG;IACd,MAAM,IAAI,CAAC1B,KAAK,CAAC2B,QAAQ,CAAC,YAAY,CAAC;IACvC,IAAI,CAAC1B,MAAM,CAAC2B,IAAI,CAAC,GAAG,CAAC;EACvB;AACF,CAAC;;;;;;;IAvHHN,OAAO,CAACC,GAAG,CAAClC,eAAe,CAAC,CAAC,CAAC;;IAE9B"},"metadata":{},"sourceType":"module","externalDependencies":[]}