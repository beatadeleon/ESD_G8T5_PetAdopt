{"ast":null,"code":"import { useRouter } from 'vue-router';\nimport { auth, database } from './firebaseConfig'; // Import auth from firebaseConfig\n\nimport { useStore } from 'vuex';\nimport { computed } from 'vue';\nimport { auth as firebaseAuth, database as firebaseDatabase } from './firebaseConfig';\nimport { ref, get, update } from 'firebase/database';\nconst __default__ = {\n  name: 'HomeComponent',\n  data() {\n    return {\n      userRole: null\n    };\n  },\n  mounted() {\n    this.fetchUserRole();\n  },\n  computed: {\n    isUser() {\n      return this.userRole === 'user';\n    },\n    isAdmin() {\n      return this.userRole === 'admin';\n    }\n  },\n  methods: {\n    fetchUserRole() {\n      firebaseAuth.onAuthStateChanged(user => {\n        const userRef = ref(firebaseDatabase, `users/${user.uid}/role`);\n        get(userRef).then(snapshot => {\n          this.userRole = snapshot.val();\n          //console.log(\"User Role from Database:\", this.userRole);\n        }).catch(error => {\n          //console.error(\"Error fetching user role:\", error);\n        });\n      });\n    }\n  }\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const store = useStore();\n    const router = useRouter();\n    auth.onAuthStateChanged(user => {\n      store.dispatch('fetchUser', user);\n    });\n    const user = computed(() => {\n      return store.getters.user;\n    });\n    const __returned__ = {\n      store,\n      router,\n      user,\n      get firebaseAuth() {\n        return firebaseAuth;\n      },\n      get firebaseDatabase() {\n        return firebaseDatabase;\n      },\n      get ref() {\n        return ref;\n      },\n      get get() {\n        return get;\n      },\n      get update() {\n        return update;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get auth() {\n        return auth;\n      },\n      get database() {\n        return database;\n      },\n      get useStore() {\n        return useStore;\n      },\n      computed\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["useRouter","auth","database","useStore","computed","firebaseAuth","firebaseDatabase","ref","get","update","__default__","name","data","userRole","mounted","fetchUserRole","isUser","isAdmin","methods","onAuthStateChanged","user","userRef","uid","then","snapshot","val","catch","error","store","router","dispatch","getters"],"sources":["/Users/junyi/Documents/petadopt/src/home.vue"],"sourcesContent":["<script setup>\nimport { useRouter } from 'vue-router'\nimport { auth, database } from './firebaseConfig'; // Import auth from firebaseConfig\nimport { ref, get } from 'firebase/database';\nimport { useStore } from 'vuex'\nimport { computed } from 'vue'\n\n\nconst store = useStore()\nconst router = useRouter()\n\nauth.onAuthStateChanged((user) => {\n  store.dispatch('fetchUser', user)\n})\n\nconst user = computed(() => {\n  return store.getters.user\n})\n\n</script>\n\n<template>\n  <div>\n    <h1>Welcome to PetAdopt</h1>\n    <p v-if=\"isUser\">\n      Adopt a pet today!\n      <h1 class=\"mt-3\">\n            Welcome <span style=\"text-transform: uppercase;\">{{ user.data.displayName }}</span>,\n        </h1>\n      \n    </p>\n    <router-link v-else to=\"/auth/login\">\n      <button>Go to Dashboard</button>\n    </router-link>\n  </div>\n</template>\n\n\n<script>\n  import { auth as firebaseAuth, database as firebaseDatabase } from './firebaseConfig'; \n  import { ref, get, update } from 'firebase/database';\n \n\n  export default {\n    name: 'HomeComponent',\n    data() {\n        return {\n          userRole: null,\n        };\n    },\n  mounted() {\n        this.fetchUserRole();\n    },\n    computed: {\n        isUser() {\n            return this.userRole === 'user';\n        },\n        isAdmin() {\n            return this.userRole === 'admin';\n        },\n\n    },\n    methods: {\n        fetchUserRole() {\n            firebaseAuth.onAuthStateChanged((user) => {\n                const userRef = ref(firebaseDatabase, `users/${user.uid}/role`);\n                get(userRef)\n                    .then((snapshot) => {\n                    this.userRole = snapshot.val();\n                    //console.log(\"User Role from Database:\", this.userRole);\n                })\n                    .catch((error) => {\n                    //console.error(\"Error fetching user role:\", error);\n                });\n            });\n        },\n    }\n}\n</script>"],"mappings":"AACA,SAASA,SAAS,QAAQ,YAAY;AACtC,SAASC,IAAI,EAAEC,QAAQ,QAAQ,kBAAkB,CAAC,CAAC;;AAEnD,SAASC,QAAQ,QAAQ,MAAM;AAC/B,SAASC,QAAQ,QAAQ,KAAK;AAkC5B,SAASH,IAAI,IAAII,YAAY,EAAEH,QAAQ,IAAII,gBAAgB,QAAQ,kBAAkB;AACrF,SAASC,GAAG,EAAEC,GAAG,EAAEC,MAAM,QAAQ,mBAAmB;AAGpD,MAAAC,WAAA,GAAe;EACbC,IAAI,EAAE,eAAe;EACrBC,IAAIA,CAAA,EAAG;IACH,OAAO;MACLC,QAAQ,EAAE;IACZ,CAAC;EACL,CAAC;EACHC,OAAOA,CAAA,EAAG;IACJ,IAAI,CAACC,aAAa,CAAC,CAAC;EACxB,CAAC;EACDX,QAAQ,EAAE;IACNY,MAAMA,CAAA,EAAG;MACL,OAAO,IAAI,CAACH,QAAQ,KAAK,MAAM;IACnC,CAAC;IACDI,OAAOA,CAAA,EAAG;MACN,OAAO,IAAI,CAACJ,QAAQ,KAAK,OAAO;IACpC;EAEJ,CAAC;EACDK,OAAO,EAAE;IACLH,aAAaA,CAAA,EAAG;MACZV,YAAY,CAACc,kBAAkB,CAAEC,IAAI,IAAK;QACtC,MAAMC,OAAO,GAAGd,GAAG,CAACD,gBAAgB,EAAG,SAAQc,IAAI,CAACE,GAAI,OAAM,CAAC;QAC/Dd,GAAG,CAACa,OAAO,CAAC,CACPE,IAAI,CAAEC,QAAQ,IAAK;UACpB,IAAI,CAACX,QAAQ,GAAGW,QAAQ,CAACC,GAAG,CAAC,CAAC;UAC9B;QACJ,CAAC,CAAC,CACGC,KAAK,CAAEC,KAAK,IAAK;UAClB;QAAA,CACH,CAAC;MACN,CAAC,CAAC;IACN;EACJ;AACJ,CAAC;;;;;;IArED,MAAMC,KAAK,GAAGzB,QAAQ,CAAC,CAAC;IACxB,MAAM0B,MAAM,GAAG7B,SAAS,CAAC,CAAC;IAE1BC,IAAI,CAACkB,kBAAkB,CAAEC,IAAI,IAAK;MAChCQ,KAAK,CAACE,QAAQ,CAAC,WAAW,EAAEV,IAAI,CAAC;IACnC,CAAC,CAAC;IAEF,MAAMA,IAAI,GAAGhB,QAAQ,CAAC,MAAM;MAC1B,OAAOwB,KAAK,CAACG,OAAO,CAACX,IAAI;IAC3B,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}